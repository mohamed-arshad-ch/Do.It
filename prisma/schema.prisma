// This is your Prisma schema file,

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("MYSQL_DATABASE_URI")
}

model Users {
  uid       String  @id @unique @db.VarChar(255)
  username  String  @unique
  createdAt String  @db.VarChar(255)
  active    Boolean @default(true)

  Ledgers      Ledgers[]
  Ledger_Group ledgergroup[]
  Transactions Transactions[]
}

model Ledgers {
  id              Int    @id @unique @default(autoincrement())
  user            Users  @relation(fields: [uid], references: [uid])
  uid             String
  ledger_name     String
  opening_balance Int
  description     String @db.VarChar(255)
  createdAt       String @db.VarChar(255)

  Ledger_Group ledgergroup[]
  Transactions Transactions[]
}

model ledgergroup {
  id         Int     @id @unique @default(autoincrement())
  user       Users   @relation(fields: [uid], references: [uid])
  uid        String
  group_name String  @db.VarChar(20)
  Ledgers    Ledgers @relation(fields: [ledgersId], references: [id])
  ledgersId  Int
}

model Transactions {
  t_id           Int      @id @unique @default(autoincrement())
  user           Users    @relation(fields: [uid], references: [uid])
  uid            String
  t_type         String   @db.VarChar(20)
  t_catagory     String   @db.VarChar(20)
  t_note         String   @db.VarChar(20)
  t_date         DateTime
  t_created_date DateTime @default(now())
  Ledgers        Ledgers  @relation(fields: [ledgersId], references: [id])
  ledgersId      Int
}
